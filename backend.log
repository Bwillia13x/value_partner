INFO:     Will watch for changes in these directories: ['/Users/benjaminwilliams/value_partner/services']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [74220] using WatchFiles
/Users/benjaminwilliams/value_partner/services/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
2025-07-04 11:20:23,476 - services.app - INFO - Logging configuration initialized with sensitive data filtering
INFO:     Started server process [74224]
INFO:     Waiting for application startup.
2025-07-04 11:20:26,143 - services.app - INFO - Application startup: Celery worker initialized
2025-07-04 11:20:26,144 - services.app - ERROR - Error enqueueing test Celery task: cannot import name 'get_alpaca_service' from 'app.integrations' (/Users/benjaminwilliams/value_partner/services/app/integrations/__init__.py)
INFO:     Application startup complete.
2025-07-04 11:20:28,038 - services.app - INFO - Request started: GET /health
2025-07-04 11:20:28,039 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61566 - "GET /health HTTP/1.1" 200 OK
2025-07-04 11:20:35,787 - services.app - INFO - Request started: GET /health
2025-07-04 11:20:35,794 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61587 - "GET /health HTTP/1.1" 200 OK
2025-07-04 11:20:42,709 - services.app - INFO - Request started: GET /health/detailed
2025-07-04 11:20:44,821 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61592 - "GET /health/detailed HTTP/1.1" 200 OK
2025-07-04 11:27:46,224 - services.app - INFO - Request started: GET /portfolio/accounts
2025-07-04 11:27:46,229 - services.app - INFO - Request started: GET /portfolio/accounts
2025-07-04 11:27:46,276 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61819 - "GET /portfolio/accounts?user_id=1 HTTP/1.1" 200 OK
2025-07-04 11:27:46,276 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61820 - "GET /portfolio/accounts?user_id=1 HTTP/1.1" 200 OK
2025-07-04 11:27:46,291 - services.app - INFO - Request started: POST /portfolio/link/token
2025-07-04 11:27:46,294 - services.app - INFO - Request started: POST /portfolio/link/token
2025-07-04 11:27:46,314 - app.error_handling - ERROR - Error recorded [external_api_1751650066304] external_api: (sqlite3.IntegrityError) NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (id, email, hashed_password, name, created_at, updated_at, plaid_access_token, plaid_item_id) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?) RETURNING id, created_at, updated_at]
[parameters: (1, 'user1***@***.example.com', None, 'User 1', None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-04 11:27:46,315 - root - ERROR - Error creating link token=*** NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (id, email, hashed_password, name, created_at, updated_at, plaid_access_token, plaid_item_id) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?) RETURNING id, created_at, updated_at]
[parameters: (1, 'user1***@***.example.com', None, 'User 1', None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-04 11:27:46,319 - app.error_handling - ERROR - Error recorded [external_api_1751650066317] external_api: (sqlite3.IntegrityError) NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (id, email, hashed_password, name, created_at, updated_at, plaid_access_token, plaid_item_id) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?) RETURNING id, created_at, updated_at]
[parameters: (1, 'user1***@***.example.com', None, 'User 1', None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-04 11:27:46,319 - root - ERROR - Error creating link token=*** NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (id, email, hashed_password, name, created_at, updated_at, plaid_access_token, plaid_item_id) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?) RETURNING id, created_at, updated_at]
[parameters: (1, 'user1***@***.example.com', None, 'User 1', None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-04 11:27:46,320 - services.app - INFO - Request completed: 503
INFO:     127.0.0.1:61819 - "POST /portfolio/link/token?user_id=1 HTTP/1.1" 503 Service Unavailable
2025-07-04 11:27:46,320 - services.app - INFO - Request completed: 503
INFO:     127.0.0.1:61820 - "POST /portfolio/link/token?user_id=1 HTTP/1.1" 503 Service Unavailable
2025-07-04 11:27:55,521 - services.app - INFO - Request started: GET /portfolio/accounts
2025-07-04 11:27:55,528 - services.app - INFO - Request started: GET /portfolio/accounts
2025-07-04 11:27:55,551 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61829 - "GET /portfolio/accounts?user_id=1 HTTP/1.1" 200 OK
2025-07-04 11:27:55,552 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61830 - "GET /portfolio/accounts?user_id=1 HTTP/1.1" 200 OK
2025-07-04 11:27:55,561 - services.app - INFO - Request started: POST /portfolio/link/token
2025-07-04 11:27:55,562 - services.app - INFO - Request started: POST /portfolio/link/token
2025-07-04 11:27:55,577 - app.error_handling - ERROR - Error recorded [external_api_1751650075567] external_api: (sqlite3.IntegrityError) NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (id, email, hashed_password, name, created_at, updated_at, plaid_access_token, plaid_item_id) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?) RETURNING id, created_at, updated_at]
[parameters: (1, 'user1***@***.example.com', None, 'User 1', None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-04 11:27:55,578 - root - ERROR - Error creating link token=*** NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (id, email, hashed_password, name, created_at, updated_at, plaid_access_token, plaid_item_id) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?) RETURNING id, created_at, updated_at]
[parameters: (1, 'user1***@***.example.com', None, 'User 1', None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-04 11:27:55,583 - app.error_handling - ERROR - Error recorded [external_api_1751650075580] external_api: (sqlite3.IntegrityError) NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (id, email, hashed_password, name, created_at, updated_at, plaid_access_token, plaid_item_id) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?) RETURNING id, created_at, updated_at]
[parameters: (1, 'user1***@***.example.com', None, 'User 1', None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-04 11:27:55,583 - root - ERROR - Error creating link token=*** NOT NULL constraint failed: users.hashed_password
[SQL: INSERT INTO users (id, email, hashed_password, name, created_at, updated_at, plaid_access_token, plaid_item_id) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, ?, ?) RETURNING id, created_at, updated_at]
[parameters: (1, 'user1***@***.example.com', None, 'User 1', None, None)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-04 11:27:55,584 - services.app - INFO - Request completed: 503
INFO:     127.0.0.1:61829 - "POST /portfolio/link/token?user_id=1 HTTP/1.1" 503 Service Unavailable
2025-07-04 11:27:55,585 - services.app - INFO - Request completed: 503
INFO:     127.0.0.1:61830 - "POST /portfolio/link/token?user_id=1 HTTP/1.1" 503 Service Unavailable
2025-07-04 11:28:15,997 - services.app - INFO - Request started: GET /data/factors
2025-07-04 11:28:16,005 - services.app - INFO - Request started: GET /data/factors
2025-07-04 11:28:16,007 - services.app - INFO - Request completed: 404
INFO:     127.0.0.1:61856 - "GET /data/factors?limit=200 HTTP/1.1" 404 Not Found
2025-07-04 11:28:16,008 - services.app - INFO - Request completed: 404
INFO:     127.0.0.1:61857 - "GET /data/factors?limit=200 HTTP/1.1" 404 Not Found
2025-07-04 11:28:23,195 - services.app - INFO - Request started: GET /data/backtest
2025-07-04 11:28:23,218 - services.app - INFO - Request started: GET /data/backtest
2025-07-04 11:28:23,221 - services.app - INFO - Request completed: 404
INFO:     127.0.0.1:61865 - "GET /data/backtest HTTP/1.1" 404 Not Found
2025-07-04 11:28:23,224 - services.app - INFO - Request completed: 404
INFO:     127.0.0.1:61866 - "GET /data/backtest HTTP/1.1" 404 Not Found
2025-07-04 11:29:13,756 - services.app - INFO - Request started: GET /health
2025-07-04 11:29:13,762 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61926 - "GET /health HTTP/1.1" 200 OK
2025-07-04 11:29:21,353 - services.app - INFO - Request started: GET /data/backtest
2025-07-04 11:29:21,356 - services.app - INFO - Request completed: 404
INFO:     127.0.0.1:61933 - "GET /data/backtest HTTP/1.1" 404 Not Found
2025-07-04 11:29:22,591 - services.app - INFO - Request started: GET /plugins
2025-07-04 11:29:22,592 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61935 - "GET /plugins HTTP/1.1" 200 OK
2025-07-04 11:29:27,294 - services.app - INFO - Request started: GET /data/factors
2025-07-04 11:29:27,298 - services.app - INFO - Request completed: 404
INFO:     127.0.0.1:61939 - "GET /data/factors?limit=10 HTTP/1.1" 404 Not Found
2025-07-04 11:30:29,633 - services.app - INFO - Request started: GET /data/factors
2025-07-04 11:30:32,076 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61993 - "GET /data/factors?limit=5 HTTP/1.1" 200 OK
2025-07-04 11:30:33,310 - services.app - INFO - Request started: GET /data/backtest
2025-07-04 11:30:33,347 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:61995 - "GET /data/backtest HTTP/1.1" 200 OK
2025-07-04 11:30:43,755 - services.app - INFO - Request started: GET /market-data/quote/AAPL
2025-07-04 11:30:43,756 - app.market_data - INFO - Subscribed to AAPL
2025-07-04 11:30:45,758 - services.app - INFO - Request completed: 404
INFO:     127.0.0.1:62003 - "GET /market-data/quote/AAPL HTTP/1.1" 404 Not Found
2025-07-04 11:30:56,653 - services.app - INFO - Request started: GET /docs
2025-07-04 11:30:56,661 - services.app - INFO - Request completed: 200
INFO:     127.0.0.1:62010 - "GET /docs HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [74224]
WARNING:  WatchFiles detected changes in 'app/main.py'. Reloading...
/Users/benjaminwilliams/value_partner/services/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
2025-07-04 11:31:20,568 - services.app - INFO - Logging configuration initialized with sensitive data filtering
INFO:     Started server process [77704]
INFO:     Waiting for application startup.
2025-07-04 11:31:23,775 - services.app - INFO - Application startup: Celery worker initialized
2025-07-04 11:31:23,775 - app.market_data - INFO - Market data manager started
2025-07-04 11:31:23,775 - services.app - INFO - Market data manager started successfully
2025-07-04 11:31:23,777 - services.app - ERROR - Error enqueueing test Celery task: cannot import name 'get_alpaca_service' from 'app.integrations' (/Users/benjaminwilliams/value_partner/services/app/integrations/__init__.py)
INFO:     Application startup complete.
/Users/benjaminwilliams/value_partner/services/venv/lib/python3.12/site-packages/pydantic/_internal/_config.py:373: UserWarning: Valid config keys have changed in V2:
* 'orm_mode' has been renamed to 'from_attributes'
  warnings.warn(message, UserWarning)
2025-07-04 11:31:25,916 - services.app - INFO - Logging configuration initialized with sensitive data filtering
INFO:     Started server process [77731]
INFO:     Waiting for application startup.
2025-07-04 11:31:28,366 - services.app - INFO - Application startup: Celery worker initialized
2025-07-04 11:31:28,366 - app.market_data - INFO - Market data manager started
2025-07-04 11:31:28,366 - services.app - INFO - Market data manager started successfully
2025-07-04 11:31:28,367 - services.app - ERROR - Error enqueueing test Celery task: cannot import name 'get_alpaca_service' from 'app.integrations' (/Users/benjaminwilliams/value_partner/services/app/integrations/__init__.py)
INFO:     Application startup complete.
INFO:     Stopping reloader process [74220]
